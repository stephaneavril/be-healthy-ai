<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Im√°genes de Bienestar</title>
    <script defer src="script.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        input, button {
            margin: 10px;
            padding: 10px;
        }
        img {
            width: 60%;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Generador de Im√°genes de Bienestar</h1>
    <p>Ingresa tus respuestas para generar una imagen motivacional:</p>
    <input id="input1" type="text" placeholder="Ejemplo: fruta">
    <input id="input2" type="text" placeholder="Ejemplo: correr">
    <input id="input3" type="text" placeholder="Ejemplo: meditaci√≥n">
    <input id="input4" type="text" placeholder="Ejemplo: dormir bien">
    <br>
    <button onclick="generarImagen()">Generar Imagen</button>
    <button onclick="imprimirImagen()">üñ® Imprimir Imagen</button>
    <p id="status"></p>
    <img id="outputImage" src="" alt="Imagen generada aparecer√° aqu√≠">

    <script>
        async function generarImagen() {
            document.getElementById("status").innerText = "Generando imagen...";
            const respuestas = [
                document.getElementById("input1").value,
                document.getElementById("input2").value,
                document.getElementById("input3").value,
                document.getElementById("input4").value
            ];

            const response = await fetch("/generate", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ respuestas })
            });

            const data = await response.json();
            if (data.image_url) {
                document.getElementById("outputImage").src = data.image_url;
                document.getElementById("status").innerText = "‚úÖ Imagen generada con √©xito";
            } else {
                document.getElementById("status").innerText = "‚ùå Error generando la imagen";
            }
        }

        function imprimirImagen() {
            const imageUrl = document.getElementById("outputImage").src;
            if (imageUrl) {
                const printWindow = window.open("");
                printWindow.document.write(`<img src="${imageUrl}" style="width:100%">`);
                printWindow.document.close();
                printWindow.print();
            } else {
                alert("No hay imagen generada para imprimir.");
            }
        }
    </script>
</body>
</html>
